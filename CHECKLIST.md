# 品質保証チェックリスト

## 🔍 全フェーズ共通チェック項目

### コード品質
- [ ] **Pylintスコア**: 9.0以上
- [ ] **型チェック**: mypyエラー0件
- [ ] **フォーマット**: Black適用済み
- [ ] **インポート**: isort適用済み
- [ ] **Docstring**: すべての関数・クラスに記載

### テスト
- [ ] **単体テスト**: 作成済み
- [ ] **カバレッジ**: 90%以上
- [ ] **エッジケース**: テスト済み
- [ ] **モック**: 外部依存を適切にモック化

### ドキュメント
- [ ] **コード内コメント**: 複雑なロジックに説明
- [ ] **README更新**: 新機能の使用方法記載
- [ ] **API文書**: 新規関数を文書化

---

## ✅ フェーズ1: プロジェクト基盤構築

### 環境セットアップ
- [ ] Python 3.11以上インストール
- [ ] 仮想環境作成（venv/conda）
- [ ] requirements.txt作成
- [ ] 開発ツール設定（pyproject.toml）
- [ ] .gitignore設定

### プロジェクト構造
- [ ] ディレクトリ構造作成完了
  ```
  ├── app.py
  ├── config/
  ├── core/
  ├── components/
  ├── utils/
  ├── tests/
  └── docs/
  ```
- [ ] 各ディレクトリに__init__.py配置
- [ ] 設定ファイル（config/settings.py）作成

### データモデル（core/data_models.py）
- [ ] Pydanticモデル定義
  - [ ] ProcessData
  - [ ] Node
  - [ ] Evaluation
  - [ ] FunctionalCategory
- [ ] バリデーション実装
- [ ] シリアライゼーション対応

### セッション管理（core/session_manager.py）
- [ ] SessionManagerクラス実装
- [ ] 状態初期化機能
- [ ] 状態更新機能
- [ ] 状態永続化機能（オプション）
- [ ] スレッドセーフティ確認

### OpenAI統合（core/llm_client.py）
- [ ] OpenAIクライアントラッパー
- [ ] リトライロジック（3回まで）
- [ ] レート制限対応
- [ ] エラーハンドリング
  - [ ] API例外処理
  - [ ] タイムアウト処理
  - [ ] 不正レスポンス処理
- [ ] コスト追跡機能
- [ ] レスポンスキャッシング

### ステップ1実装（components/process_definition.py）
- [ ] UIコンポーネント
  - [ ] タイトル表示
  - [ ] サイドバー実装
  - [ ] 入力フォーム
- [ ] データバインディング
- [ ] リアルタイム更新
- [ ] 入力検証

### ステップ2実装（カテゴリ抽出）
- [ ] 抽出ボタン実装
- [ ] プロンプトテンプレート
- [ ] JSON解析処理
- [ ] エラー表示
- [ ] データエディタ統合

### テスト作成
- [ ] test_data_models.py
- [ ] test_session_manager.py
- [ ] test_llm_client.py
- [ ] test_process_definition.py
- [ ] 統合テスト

### 動作確認
- [ ] アプリ起動確認
- [ ] セッション管理動作
- [ ] API接続確認
- [ ] カテゴリ抽出機能
- [ ] エラー処理確認

---

## ✅ フェーズ2: 対話機能実装

### Zigzaggingエンジン（components/zigzagging_chat.py）
- [ ] ChatEngineクラス実装
- [ ] メッセージ履歴管理
- [ ] コンテキスト管理
- [ ] プロンプト生成

### システムプロンプト
- [ ] Zigzaggingプロンプト実装
- [ ] ペルソナ設定
- [ ] 対話戦略実装
- [ ] 出力フォーマット指定

### チャットUI
- [ ] st.chat_message実装
- [ ] st.chat_input実装
- [ ] 履歴表示
- [ ] スクロール制御
- [ ] ローディング表示

### ノード抽出
- [ ] 抽出ボタン実装
- [ ] ノードリスト生成
- [ ] 重複除去処理
- [ ] データエディタ表示

### 対話フロー
- [ ] 開始メッセージ生成
- [ ] 質問生成ロジック
- [ ] 深掘り機能
- [ ] 完了判定

### テスト
- [ ] test_zigzagging_chat.py
- [ ] 対話フローテスト
- [ ] プロンプト一貫性テスト
- [ ] ノード抽出精度テスト

---

## ✅ フェーズ3: 評価システム実装

### ペア生成（components/evaluation.py）
- [ ] ペア生成アルゴリズム
- [ ] permutations実装
- [ ] ペアカウント表示
- [ ] メモリ効率最適化

### 評価UI
- [ ] ペア表示コンポーネント
- [ ] ナビゲーションボタン
- [ ] 進捗バー
- [ ] 評価状態表示

### LLM評価
- [ ] 評価プロンプト実装
- [ ] スコアリング（-9〜+9）
- [ ] 理由生成
- [ ] JSON解析

### データ管理
- [ ] 評価結果保存
- [ ] 更新処理
- [ ] 検索機能
- [ ] エクスポート機能

### パフォーマンス
- [ ] バッチ処理実装
- [ ] 並行評価（オプション）
- [ ] プログレス表示
- [ ] キャンセル機能

### テスト
- [ ] test_evaluation.py
- [ ] ペア生成テスト
- [ ] 評価ロジックテスト
- [ ] データ整合性テスト
- [ ] パフォーマンステスト

---

## ✅ フェーズ4: 可視化・分析機能

### 隣接行列（components/visualization.py）
- [ ] DataFrame変換
- [ ] pivot_table実装
- [ ] 欠損値処理
- [ ] 正方行列保証

### ヒートマップ
- [ ] Seaborn統合
- [ ] カラーマップ設定
- [ ] アノテーション
- [ ] 軸ラベル設定
- [ ] エクスポート機能

### ネットワーク分析
- [ ] NetworkX統合
- [ ] グラフ生成
- [ ] ノードラベリング
- [ ] レイアウト選択

### 中心性分析
- [ ] PageRank計算
- [ ] 入次数中心性
- [ ] 出次数中心性
- [ ] 結果テーブル表示

### エクスポート
- [ ] CSV出力
- [ ] JSON出力
- [ ] 画像出力（PNG/SVG）
- [ ] レポート生成

### 可視化品質
- [ ] 配色の統一
- [ ] フォントサイズ調整
- [ ] レスポンシブ対応
- [ ] インタラクティブ機能

### テスト
- [ ] test_visualization.py
- [ ] 行列生成テスト
- [ ] 可視化精度テスト
- [ ] エクスポートテスト
- [ ] 大規模データテスト

---

## 📋 リリース前最終チェック

### システムテスト
- [ ] 全機能の統合動作確認
- [ ] 1000ノードでの負荷テスト
- [ ] メモリリークチェック
- [ ] ブラウザ互換性確認

### セキュリティ
- [ ] APIキー管理確認
- [ ] 入力サニタイズ
- [ ] XSS対策
- [ ] データ暗号化（必要に応じて）

### ドキュメント
- [ ] ユーザーマニュアル完成
- [ ] インストール手順書
- [ ] トラブルシューティング
- [ ] FAQ作成

### デプロイ準備
- [ ] 本番環境設定
- [ ] バックアップ計画
- [ ] ロールバック手順
- [ ] モニタリング設定

### 研究要件
- [ ] データ再現性確認
- [ ] 実験ログ記録
- [ ] 統計分析機能
- [ ] 論文用図表生成

## 🎯 品質目標達成基準

| 指標 | 目標値 | 現在値 |
|------|--------|--------|
| テストカバレッジ | 90%以上 | - |
| Pylintスコア | 9.0以上 | - |
| 応答時間（1000ノード） | 5秒以内 | - |
| メモリ使用量 | 2GB以下 | - |
| エラー率 | 1%以下 | - |

## 📝 備考

- 各チェック項目は実装と同時に確認すること
- チェックが付かない項目は理由を記録すること
- 品質基準を満たさない場合は、次フェーズに進まないこと
- 週次レビューでチェックリストの進捗を確認すること